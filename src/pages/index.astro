---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

interface BlogPost {
	title: string;
	description: string;
	publishDate: Date;
	author: string;
	tags: string[];
	slug: string;
	image?: string;
}

// Get latest blog posts
const posts = await getCollection('blog');
const latestPosts = posts
	.sort((a, b) => new Date(b.data.publishDate).getTime() - new Date(a.data.publishDate).getTime())
	.slice(0, 3)
	.map(post => ({
		title: post.data.title,
		description: post.data.description,
		publishDate: post.data.publishDate,
		author: post.data.author,
		tags: post.data.tags,
		slug: post.slug,
		image: post.data.image
	}));
---

<Layout title="Jorge Buckley - Software Engineer">
	<div class="max-w-4xl mx-auto space-y-16">
		<!-- Hero Section -->
		<div class="flex flex-col md:flex-row items-center gap-8">
			<div class="w-48 h-48 rounded-full overflow-hidden border-4 border-[color:var(--color-luxe-accent)]">
				<img
					src="/profile-image/profile.jpg"
					alt="Jorge Buckley - Profile Picture"
					class="w-full h-full object-cover scale-130 -translate-y-6 translate-x-2"
					width="192"
					height="192"
				/>
			</div>
			<div class="text-center md:text-left">
				<h1 class="text-4xl font-bold text-[color:var(--color-luxe-text)] mb-4">Jorge Buckley</h1>
				<p class="text-xl text-[color:var(--color-luxe-subtext)] mb-6">Software Engineer • Founder of <a href="https://selumastudio.com" target="_blank" class="text-[color:var(--color-luxe-accent)] hover:text-[color:var(--color-luxe-link)] transition-colors">Seluma Studio</a> (coming soon)</p>
				<div class="flex gap-4 justify-center md:justify-start">
					<a href="/about" class="bg-[color:var(--color-luxe-accent)] text-[color:var(--color-luxe-text)] px-6 py-2 rounded-lg hover:opacity-90 transition-colors focus:outline-none focus:ring-2 focus:ring-[color:var(--color-luxe-accent)] focus:ring-offset-2" aria-label="Learn more about me">
						About Me
					</a>
					<a href="/contact" class="bg-[color:var(--color-luxe-card)] text-[color:var(--color-luxe-text)] px-6 py-2 rounded-lg hover:opacity-90 transition-colors focus:outline-none focus:ring-2 focus:ring-[color:var(--color-luxe-accent)] focus:ring-offset-2" aria-label="Contact me">
						Contact
					</a>
				</div>
			</div>
		</div>

		<!-- Skills Section -->
		<section aria-labelledby="skills-heading">
			<div class="flex justify-between items-center mb-6">
				<h2 id="skills-heading" class="text-2xl font-semibold text-[color:var(--color-luxe-text)]">Skills</h2>
				<a href="/skills" class="text-[color:var(--color-luxe-accent)] hover:text-[color:var(--color-luxe-link)] transition-colors flex items-center gap-2 focus:outline-none focus:ring-2 focus:ring-[color:var(--color-luxe-accent)] focus:ring-offset-2 rounded-lg px-2 py-1" aria-label="View all skills">
					View All Skills
					<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
					</svg>
				</a>
			</div>
			<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
				<!-- Frontend -->
				<a href="/skills#frontend" class="group focus:outline-none focus:ring-2 focus:ring-[color:var(--color-luxe-accent)] focus:ring-offset-2 rounded-lg">
					<div class="bg-[color:var(--color-luxe-card)] p-6 rounded-lg transition-transform group-hover:scale-105">
						<div class="flex items-center gap-3 mb-4">
							<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-[color:var(--color-luxe-accent)]" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
							</svg>
							<h3 class="text-lg font-medium text-[color:var(--color-luxe-text)]">Frontend Development</h3>
						</div>
						<p class="text-[color:var(--color-luxe-subtext)]">React, Next.js, TypeScript, Tailwind CSS</p>
					</div>
				</a>

				<!-- Backend -->
				<a href="/skills#backend" class="group focus:outline-none focus:ring-2 focus:ring-[color:var(--color-luxe-accent)] focus:ring-offset-2 rounded-lg">
					<div class="bg-[color:var(--color-luxe-card)] p-6 rounded-lg transition-transform group-hover:scale-105">
						<div class="flex items-center gap-3 mb-4">
							<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-[color:var(--color-luxe-accent)]" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01" />
							</svg>
							<h3 class="text-lg font-medium text-[color:var(--color-luxe-text)]">Backend Development</h3>
						</div>
						<p class="text-[color:var(--color-luxe-subtext)]">Node.js, Express, Python, SQL</p>
					</div>
				</a>

				<!-- DevOps -->
				<a href="/skills#devops" class="group focus:outline-none focus:ring-2 focus:ring-[color:var(--color-luxe-accent)] focus:ring-offset-2 rounded-lg">
					<div class="bg-[color:var(--color-luxe-card)] p-6 rounded-lg transition-transform group-hover:scale-105">
						<div class="flex items-center gap-3 mb-4">
							<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-[color:var(--color-luxe-accent)]" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
							</svg>
							<h3 class="text-lg font-medium text-[color:var(--color-luxe-text)]">DevOps</h3>
						</div>
						<p class="text-[color:var(--color-luxe-subtext)]">Docker, AWS, CI/CD, Git</p>
					</div>
				</a>

				<!-- Mobile -->
				<a href="/skills#mobile" class="group focus:outline-none focus:ring-2 focus:ring-[color:var(--color-luxe-accent)] focus:ring-offset-2 rounded-lg">
					<div class="bg-[color:var(--color-luxe-card)] p-6 rounded-lg transition-transform group-hover:scale-105">
						<div class="flex items-center gap-3 mb-4">
							<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-[color:var(--color-luxe-accent)]" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z" />
							</svg>
							<h3 class="text-lg font-medium text-[color:var(--color-luxe-text)]">Mobile Development</h3>
						</div>
						<p class="text-[color:var(--color-luxe-subtext)]">React Native, iOS, Android</p>
					</div>
				</a>
			</div>
		</section>

		<!-- Latest Projects -->
		<section aria-labelledby="projects-heading">
			<div class="flex justify-between items-center mb-6">
				<h2 id="projects-heading" class="text-2xl font-semibold text-[color:var(--color-luxe-text)]">Latest Projects</h2>
				<a href="/projects" class="text-[color:var(--color-luxe-accent)] hover:text-[color:var(--color-luxe-link)] transition-colors flex items-center gap-2 focus:outline-none focus:ring-2 focus:ring-[color:var(--color-luxe-accent)] focus:ring-offset-2 rounded-lg px-2 py-1" aria-label="View all projects">
					View All Projects
					<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
					</svg>
				</a>
			</div>
			<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
				<a href="/projects#project1" class="group focus:outline-none focus:ring-2 focus:ring-[color:var(--color-luxe-accent)] focus:ring-offset-2 rounded-lg">
					<div class="bg-[color:var(--color-luxe-card)] p-6 rounded-lg transition-transform group-hover:scale-105">
						<h3 class="text-lg font-medium text-[color:var(--color-luxe-text)] mb-2">Personal Website</h3>
						<p class="text-[color:var(--color-luxe-subtext)]">A content-driven personal website built with the help of Cursor AI.</p>
					</div>
				</a>
				<a href="/projects#project2" class="group focus:outline-none focus:ring-2 focus:ring-[color:var(--color-luxe-accent)] focus:ring-offset-2 rounded-lg">
					<div class="bg-[color:var(--color-luxe-card)] p-6 rounded-lg transition-transform group-hover:scale-105">
						<h3 class="text-lg font-medium text-[color:var(--color-luxe-text)] mb-2">Sanita</h3>
						<p class="text-[color:var(--color-luxe-subtext)]">An open-source social media platform centered around health and fitness.</p>
					</div>
				</a>
			</div>
		</section>

		<!-- Latest Blog Posts -->
		<section aria-labelledby="blog-heading">
			<div class="flex justify-between items-center mb-6">
				<h2 id="blog-heading" class="text-2xl font-semibold text-[color:var(--color-luxe-text)]">Latest Blog Posts</h2>
				<a href="/blog" class="text-[color:var(--color-luxe-accent)] hover:text-[color:var(--color-luxe-link)] transition-colors flex items-center gap-2 focus:outline-none focus:ring-2 focus:ring-[color:var(--color-luxe-accent)] focus:ring-offset-2 rounded-lg px-2 py-1" aria-label="View all blog posts">
					View All Posts
					<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
					</svg>
				</a>
			</div>
			<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
				{latestPosts.map(post => (
					<a href={`/blog/${post.slug}`} class="group focus:outline-none focus:ring-2 focus:ring-[color:var(--color-luxe-accent)] focus:ring-offset-2 rounded-lg">
						<article class="bg-[color:var(--color-luxe-card)] p-4 md:p-6 rounded-lg transition-transform group-hover:scale-105">
							<h3 class="text-lg font-medium text-[color:var(--color-luxe-text)] mb-2">{post.title}</h3>
							<p class="text-[color:var(--color-luxe-subtext)] mb-3 md:mb-4 text-sm md:text-base">{post.description}</p>
							<div class="flex flex-col md:flex-row md:items-center gap-2 md:gap-4 text-sm text-[color:var(--color-luxe-subtext)]">
								<time datetime={new Date(post.publishDate).toISOString()}>
									{new Date(post.publishDate).toLocaleDateString('en-US', {
										year: 'numeric',
										month: 'long',
										day: 'numeric'
									})}
								</time>
								<span class="hidden md:inline">•</span>
								<span>{post.author}</span>
							</div>
							<div class="flex flex-wrap gap-2 mt-3 md:mt-4">
								{post.tags.map(tag => (
									<span class="px-2 py-1 bg-[color:var(--color-luxe-background)] text-[color:var(--color-luxe-text)] rounded-full text-xs">
										{tag}
									</span>
								))}
							</div>
						</article>
					</a>
				))}
			</div>
		</section>
	</div>
</Layout>
